<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>control.optimal.solve_ocp &mdash; Python Control Systems Library 0.10.1-8-gcc0020a documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="control.optimal.state_poly_constraint" href="control.optimal.state_poly_constraint.html" />
    <link rel="prev" title="control.optimal.quadratic_cost" href="control.optimal.quadratic_cost.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Python Control Systems Library
          </a>
              <div class="version">
                0.10.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Library conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control.html">Function reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Control system classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting.html">Plotting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab.html">MATLAB compatibility module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flatsys.html">Differentially flat systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iosys.html">Input/output systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../descfcn.html">Describing functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../optimal.html">Optimization-based control</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../optimal.html#optimal-control-problem-setup">Optimal control problem setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimal.html#optimal-estimation-problem-setup">Optimal estimation problem setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimal.html#module-usage">Module usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimal.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimal.html#optimization-tips">Optimization Tips</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../optimal.html#module-classes-and-functions">Module classes and functions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="control.optimal.OptimalControlProblem.html">control.optimal.OptimalControlProblem</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.OptimalControlResult.html">control.optimal.OptimalControlResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.OptimalEstimationProblem.html">control.optimal.OptimalEstimationProblem</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.OptimalEstimationResult.html">control.optimal.OptimalEstimationResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.create_mpc_iosystem.html">control.optimal.create_mpc_iosystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.disturbance_range_constraint.html">control.optimal.disturbance_range_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.gaussian_likelihood_cost.html">control.optimal.gaussian_likelihood_cost</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.input_poly_constraint.html">control.optimal.input_poly_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.input_range_constraint.html">control.optimal.input_range_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.output_poly_constraint.html">control.optimal.output_poly_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.output_range_constraint.html">control.optimal.output_range_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.quadratic_cost.html">control.optimal.quadratic_cost</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">control.optimal.solve_ocp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#control.optimal.solve_ocp"><code class="docutils literal notranslate"><span class="pre">solve_ocp()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.state_poly_constraint.html">control.optimal.state_poly_constraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.optimal.state_range_constraint.html">control.optimal.state_range_constraint</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Control Systems Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../optimal.html">Optimization-based control</a></li>
      <li class="breadcrumb-item active">control.optimal.solve_ocp</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/control.optimal.solve_ocp.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="control-optimal-solve-ocp">
<h1>control.optimal.solve_ocp<a class="headerlink" href="#control-optimal-solve-ocp" title="Permalink to this heading">Â¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="control.optimal.solve_ocp">
<span class="sig-prename descclassname"><span class="pre">control.optimal.</span></span><span class="sig-name descname"><span class="pre">solve_ocp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timepts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trajectory_constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminal_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminal_constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_guess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_states</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_summary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-control/python-control/blob/main/control/optimal.py#L954-L1133"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#control.optimal.solve_ocp" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the solution to an optimal control problem.</p>
<p>The optimal trajectory (states and inputs) is computed so as to
approximately mimimize a cost function of the following form (for
continuous time systems):</p>
<blockquote>
<div><p>J(x(.), u(.)) = int_0^T L(x(t), u(t)) dt + V(x(T)),</p>
</div></blockquote>
<p>where T is the time horizon.</p>
<p>Discrete time systems use a similar formulation, with the integral
replaced by a sum:</p>
<blockquote>
<div><p>J(x[.], u[.]) = sum_0^{N-1} L(x_k, u_k) + V(x_N),</p>
</div></blockquote>
<p>where N is the time horizon (corresponding to timepts[-1]).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sys</strong> (<a class="reference internal" href="control.InputOutputSystem.html#control.InputOutputSystem" title="control.InputOutputSystem"><em>InputOutputSystem</em></a>) â I/O system for which the optimal input will be computed.</p></li>
<li><p><strong>timepts</strong> (<em>1D array_like</em>) â List of times at which the optimal input should be computed.</p></li>
<li><p><strong>X0</strong> (<em>array-like</em><em> or </em><em>number</em><em>, </em><em>optional</em>) â Initial condition (default = 0).</p></li>
<li><p><strong>cost</strong> (<em>callable</em>) â Function that returns the integral cost (L) given the current state
and input.  Called as <cite>cost(x, u)</cite>.</p></li>
<li><p><strong>trajectory_constraints</strong> (<em>list</em><em> of </em><em>tuples</em><em>, </em><em>optional</em>) â <p>List of constraints that should hold at each point in the time vector.
Each element of the list should consist of a tuple with first element
given by <code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.optimize.LinearConstraint()</span></code> or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.optimize.NonlinearConstraint()</span></code> and the remaining
elements of the tuple are the arguments that would be passed to those
functions.  The following tuples are supported:</p>
<ul>
<li><p>(LinearConstraint, A, lb, ub): The matrix A is multiplied by stacked
vector of the state and input at each point on the trajectory for
comparison against the upper and lower bounds.</p></li>
<li><p>(NonlinearConstraint, fun, lb, ub): a user-specific constraint
function <cite>fun(x, u)</cite> is called at each point along the trajectory
and compared against the upper and lower bounds.</p></li>
</ul>
<p>The constraints are applied at each time point along the trajectory.</p>
</p></li>
<li><p><strong>terminal_cost</strong> (<em>callable</em><em>, </em><em>optional</em>) â Function that returns the terminal cost (V) given the final state
and input.  Called as terminal_cost(x, u).  (For compatibility with
the form of the cost function, u is passed even though it is often
not part of the terminal cost.)</p></li>
<li><p><strong>terminal_constraints</strong> (<em>list</em><em> of </em><em>tuples</em><em>, </em><em>optional</em>) â List of constraints that should hold at the end of the trajectory.
Same format as <cite>constraints</cite>.</p></li>
<li><p><strong>initial_guess</strong> (<em>1D</em><em> or </em><em>2D array_like</em>) â Initial inputs to use as a guess for the optimal input.  The inputs
should either be a 2D vector of shape (ninputs, len(timepts)) or a
1D input of shape (ninputs,) that will be broadcast by extension of
the time axis.</p></li>
<li><p><strong>basis</strong> (<a class="reference internal" href="control.flatsys.BasisFamily.html#control.flatsys.BasisFamily" title="control.flatsys.BasisFamily"><em>BasisFamily</em></a><em>, </em><em>optional</em>) â Use the given set of basis functions for the inputs instead of
setting the value of the input at each point in the timepts vector.</p></li>
<li><p><strong>trajectory_method</strong> (<em>string</em><em>, </em><em>optional</em>) â Method to use for carrying out the optimization. Currently supported
methods are âshootingâ and âcollocationâ (continuous time only). The
default value is âshootingâ for discrete time systems and
âcollocationâ for continuous time systems.</p></li>
<li><p><strong>log</strong> (<em>bool</em><em>, </em><em>optional</em>) â If <cite>True</cite>, turn on logging messages (using Python logging module).</p></li>
<li><p><strong>print_summary</strong> (<em>bool</em><em>, </em><em>optional</em>) â If <cite>True</cite> (default), print a short summary of the computation.</p></li>
<li><p><strong>return_states</strong> (<em>bool</em><em>, </em><em>optional</em>) â If True, return the values of the state at each time (default = True).</p></li>
<li><p><strong>squeeze</strong> (<em>bool</em><em>, </em><em>optional</em>) â If True and if the system has a single output, return the system
output as a 1D array rather than a 2D array.  If False, return the
system output as a 2D array even if the system is SISO.  Default value
set by config.defaults[âcontrol.squeeze_time_responseâ].</p></li>
<li><p><strong>transpose</strong> (<em>bool</em><em>, </em><em>optional</em>) â If True, assume that 2D input arrays are transposed from the standard
format.  Used to convert MATLAB-style inputs to our format.</p></li>
<li><p><strong>minimize_method</strong> (<em>str</em><em>, </em><em>optional</em>) â Set the method used by <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize" title="(in SciPy v1.14.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.minimize()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>res</strong> (<em>OptimalControlResult</em>) â Bundle object with the results of the optimal control problem.</p></li>
<li><p><strong>res.success</strong> (<em>bool</em>) â Boolean flag indicating whether the optimization was successful.</p></li>
<li><p><strong>res.time</strong> (<em>array</em>) â Time values of the input.</p></li>
<li><p><strong>res.inputs</strong> (<em>array</em>) â Optimal inputs for the system.  If the system is SISO and squeeze is
not True, the array is 1D (indexed by time).  If the system is not
SISO or squeeze is False, the array is 2D (indexed by the output
number and time).</p></li>
<li><p><strong>res.states</strong> (<em>array</em>) â Time evolution of the state vector (if return_states=True).</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li><p>For discrete time systems, the final value of the timepts vector
specifies the final time t_N, and the trajectory cost is computed
from time t_0 to t_{N-1}.  Note that the input u_N does not affect
the state x_N and so it should always be returned as 0.  Further, if
neither a terminal cost nor a terminal constraint is given, then the
input at time point t_{N-1} does not affect the cost function and
hence u_{N-1} will also be returned as zero.  If you want the
trajectory cost to include state costs at time t_{N}, then you can
set <cite>terminal_cost</cite> to be the same function as <cite>cost</cite>.</p></li>
<li><p>Additional keyword parameters can be used to fine-tune the behavior
of the underlying optimization and integration functions.  See
<a class="reference internal" href="control.optimal.OptimalControlProblem.html#control.optimal.OptimalControlProblem" title="control.optimal.OptimalControlProblem"><code class="xref py py-func docutils literal notranslate"><span class="pre">OptimalControlProblem()</span></code></a> for more information.</p></li>
</ol>
</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="control.optimal.quadratic_cost.html" class="btn btn-neutral float-left" title="control.optimal.quadratic_cost" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="control.optimal.state_poly_constraint.html" class="btn btn-neutral float-right" title="control.optimal.state_poly_constraint" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, python-control.org.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>