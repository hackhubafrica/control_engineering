<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>control.create_estimator_iosystem &mdash; Python Control Systems Library 0.10.1-8-gcc0020a documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="control.dlqe" href="control.dlqe.html" />
    <link rel="prev" title="control.correlation" href="control.correlation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Python Control Systems Library
          </a>
              <div class="version">
                0.10.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Library conventions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../control.html">Function reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../control.html#available-subpackages">Available subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#system-creation">System creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#system-interconnections">System interconnections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#frequency-domain-plotting">Frequency domain plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#time-domain-simulation">Time domain simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#control-system-analysis">Control system analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#matrix-computations">Matrix computations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#control-system-synthesis">Control system synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#model-simplification-tools">Model simplification tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#nonlinear-system-support">Nonlinear system support</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../control.html#stochastic-system-support">Stochastic system support</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="control.correlation.html">control.correlation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">control.create_estimator_iosystem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#control.create_estimator_iosystem"><code class="docutils literal notranslate"><span class="pre">create_estimator_iosystem()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="control.dlqe.html">control.dlqe</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.lqe.html">control.lqe</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.white_noise.html">control.white_noise</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../control.html#utility-functions-and-conversions">Utility functions and conversions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Control system classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting.html">Plotting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab.html">MATLAB compatibility module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flatsys.html">Differentially flat systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iosys.html">Input/output systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../descfcn.html">Describing functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimal.html">Optimization-based control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Control Systems Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../control.html">Function reference</a></li>
      <li class="breadcrumb-item active">control.create_estimator_iosystem</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/control.create_estimator_iosystem.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="control-create-estimator-iosystem">
<h1>control.create_estimator_iosystem<a class="headerlink" href="#control-create-estimator-iosystem" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="control.create_estimator_iosystem">
<span class="sig-prename descclassname"><span class="pre">control.</span></span><span class="sig-name descname"><span class="pre">create_estimator_iosystem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">QN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">G</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">C</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disturbance_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">estimate_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xhat[{i}]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariance_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P[{i},{j}]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/python-control/python-control/blob/main/control/stochsys.py#L308-L586"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#control.create_estimator_iosystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an I/O system implementing a linear quadratic estimator.</p>
<p>This function creates an input/output system that implements a
continuous time state estimator of the form</p>
<div class="math">
<p><span class="math">d \hat{x}/dt &amp;= A \hat{x} + B u - L (C \hat{x} - y) \\
   dP/dt &amp;= A P + P A^T + F Q_N F^T - P C^T R_N^{-1} C P \\
       L &amp;= P C^T R_N^{-1}</span></p>
</div><p>or a discrete time state estimator of the form</p>
<div class="math">
<p><span class="math">\hat{x}[k+1] &amp;= A \hat{x}[k] + B u[k] - L (C \hat{x}[k] - y[k]) \\
       P[k+1] &amp;= A P A^T + F Q_N F^T - A P C^T R_e^{-1} C P A \\
            L &amp;= A P C^T R_e^{-1}</span></p>
</div><p>where <span class="math">R_e = R_N + C P C^T</span>.  It can be called in the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">estim</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">create_estimator_iosystem</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="n">QN</span><span class="p">,</span> <span class="n">RN</span><span class="p">)</span>
</pre></div>
</div>
<p>where <cite>sys</cite> is the process dynamics and <cite>QN</cite> and <cite>RN</cite> are the covariance
of the disturbance noise and measurement noise.  The function returns
the estimator <cite>estim</cite> as I/O system with a parameter <cite>correct</cite> that can
be used to turn off the correction term in the estimation (for forward
predictions).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sys</strong> (<a class="reference internal" href="control.StateSpace.html#control.StateSpace" title="control.StateSpace"><em>StateSpace</em></a>) – The linear I/O system that represents the process dynamics.</p></li>
<li><p><strong>QN</strong> (<em>ndarray</em>) – Disturbance and measurement noise covariance matrices.</p></li>
<li><p><strong>RN</strong> (<em>ndarray</em>) – Disturbance and measurement noise covariance matrices.</p></li>
<li><p><strong>P0</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – Initial covariance matrix.  If not specified, defaults to the steady
state covariance.</p></li>
<li><p><strong>G</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – Disturbance matrix describing how the disturbances enters the
dynamics.  Defaults to sys.B.</p></li>
<li><p><strong>C</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – If the system has full state output, define the measured values to
be used by the estimator.  Otherwise, use the system output as the
measured values.</p></li>
<li><p><strong>control_indices</strong> (<em>int</em><em>, </em><em>slice</em><em>, or </em><em>list</em><em> of </em><em>int</em><em> or </em><em>string</em><em>, </em><em>optional</em>) – Specify the indices in the system input vector that correspond to
the control inputs.  These inputs will be used as known control
inputs for the estimator. If value is an integer <cite>m</cite>, the first <cite>m</cite>
system inputs are used.  Otherwise, the value should be a slice or
a list of indices.  The list of indices can be specified as either
integer offsets or as system input signal names.  If not specified,
defaults to the system inputs.</p></li>
<li><p><strong>disturbance_indices</strong> (<em>int</em><em>, </em><em>list</em><em> of </em><em>int</em><em>, or </em><em>slice</em><em>, </em><em>optional</em>) – Specify the indices in the system input vector that correspond to
the unknown disturbances.  These inputs are assumed to be white
noise with noise intensity QN.  If value is an integer <cite>m</cite>, the
last <cite>m</cite> system inputs are used.  Otherwise, the value should be a
slice or a list of indices.  The list of indices can be specified
as either integer offsets or as system input signal names.  If not
specified, the disturbances are assumed to be added to the system
inputs.</p></li>
<li><p><strong>estimate_labels</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the names of the state estimate variables (estimator outputs).
If a single string is specified, it should be a format string using
the variable <cite>i</cite> as an index.  Otherwise, a list of strings matching
the number of system states should be used.  Default is “xhat[{i}]”.</p></li>
<li><p><strong>covariance_labels</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the name of the the covariance state variables.  If a single
string is specified, it should be a format string using the
variables <cite>i</cite> and <cite>j</cite> as indices.  Otherwise, a list of strings
matching the size of the covariance matrix should be used.  Default
is “P[{i},{j}]”.</p></li>
<li><p><strong>measurement_labels</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the name of the measurement and control signal names (estimator
inputs).  If a single string is specified, it should be a format
string using the variable <code class="docutils literal notranslate"><span class="pre">i</span></code> as an index.  Otherwise, a list of
strings matching the size of the system inputs and outputs should be
used.  Default is the signal names for the system measurements and
known control inputs. These settings can also be overriden using the
<cite>inputs</cite> keyword.</p></li>
<li><p><strong>control_labels</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the name of the measurement and control signal names (estimator
inputs).  If a single string is specified, it should be a format
string using the variable <code class="docutils literal notranslate"><span class="pre">i</span></code> as an index.  Otherwise, a list of
strings matching the size of the system inputs and outputs should be
used.  Default is the signal names for the system measurements and
known control inputs. These settings can also be overriden using the
<cite>inputs</cite> keyword.</p></li>
<li><p><strong>inputs</strong> (<em>int</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the names of the inputs, outputs, and states, as described in
<a class="reference internal" href="control.InputOutputSystem.html#control.InputOutputSystem" title="control.InputOutputSystem"><code class="xref py py-func docutils literal notranslate"><span class="pre">InputOutputSystem()</span></code></a>.  Overrides signal labels.</p></li>
<li><p><strong>outputs</strong> (<em>int</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the names of the inputs, outputs, and states, as described in
<a class="reference internal" href="control.InputOutputSystem.html#control.InputOutputSystem" title="control.InputOutputSystem"><code class="xref py py-func docutils literal notranslate"><span class="pre">InputOutputSystem()</span></code></a>.  Overrides signal labels.</p></li>
<li><p><strong>states</strong> (<em>int</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Set the names of the inputs, outputs, and states, as described in
<a class="reference internal" href="control.InputOutputSystem.html#control.InputOutputSystem" title="control.InputOutputSystem"><code class="xref py py-func docutils literal notranslate"><span class="pre">InputOutputSystem()</span></code></a>.  Overrides signal labels.</p></li>
<li><p><strong>name</strong> (<em>string</em><em>, </em><em>optional</em>) – System name (used for specifying signals). If unspecified, a generic
name &lt;sys[id]&gt; is generated with a unique integer id.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>estim</strong> – Input/output system representing the estimator.  This system takes
the system output y and input u and generates the estimated state
xhat.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="control.InputOutputSystem.html#control.InputOutputSystem" title="control.InputOutputSystem">InputOutputSystem</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function can be used with the <code class="docutils literal notranslate"><span class="pre">create_statefbk_iosystem()</span></code> function
to create a closed loop, output-feedback, state space controller:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">K</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">lqr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
<span class="n">est</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">create_estimator_iosystem</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="n">QN</span><span class="p">,</span> <span class="n">RN</span><span class="p">,</span> <span class="n">P0</span><span class="p">)</span>
<span class="n">ctrl</span><span class="p">,</span> <span class="n">clsys</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">create_statefbk_iosystem</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">est</span><span class="p">)</span>
</pre></div>
</div>
<p>The estimator can also be run on its own to process a noisy signal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resp</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">input_output_response</span><span class="p">(</span><span class="n">est</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="n">U</span><span class="p">],</span> <span class="p">[</span><span class="n">X0</span><span class="p">,</span> <span class="n">P0</span><span class="p">])</span>
</pre></div>
</div>
<p>If desired, the <code class="docutils literal notranslate"><span class="pre">correct</span></code> parameter can be set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to allow
prediction with no additional measurement information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resp</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">input_output_response</span><span class="p">(</span>
   <span class="n">est</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">X0</span><span class="p">,</span> <span class="n">P0</span><span class="p">],</span> <span class="n">param</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;correct&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="control.correlation.html" class="btn btn-neutral float-left" title="control.correlation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="control.dlqe.html" class="btn btn-neutral float-right" title="control.dlqe" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, python-control.org.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>